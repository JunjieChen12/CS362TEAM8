<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dashboard - Taskwise</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Unbounded:wght@300;400;600;700&family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

  <!-- NAVIGATION -->
  <nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top border-bottom">
    <div class="container-fluid px-4">
      <a class="navbar-brand logo" href="#">TASKWISE</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav mx-auto">
          <li class="nav-item"><a class="nav-link active" href="#" id="navHome">HOME</a></li>
          <li class="nav-item"><a class="nav-link" href="#" id="navAnalytics">ANALYTICS</a></li>
          <li class="nav-item"><a class="nav-link" href="#" id="navHistory">HISTORY</a></li>
        </ul>
        <div class="d-flex gap-2">
          <button class="btn btn-icon rounded-circle" id="notificationBtn" title="Notifications">
            <i class="bi bi-bell"></i>
          </button>
          <button class="btn btn-icon rounded-circle btn-user" id="profileBtn" title="Profile">
            <i class="bi bi-person"></i>
          </button>
        </div>
      </div>
    </div>
  </nav>

  <!-- MAIN CONTENT -->
  <main class="container-fluid px-4 py-4" style="padding-bottom: 6rem;">

    <!-- Greeting Header -->
    <div class="dashboard-header mb-4">
      <h1 class="greeting mb-2">
        <span id="greetingTime">Good afternoon</span>, <strong id="userName">User</strong>
      </h1>
      <p class="date-display text-muted" id="currentDate"></p>
    </div>

    <!-- AI Focus Banner -->
    <div class="card focus-banner mb-4" id="focusBanner">
      <div class="card-body p-4">
        <div class="focus-label mb-2">‚ú¶ AI RECOMMENDED</div>
        <h2 class="focus-title mb-3" id="focusTaskTitle">Loading...</h2>
        <div class="row g-3 mb-4">
          <div class="col-auto">
            <div class="stat-item">
              <div class="stat-label">Estimated Time</div>
              <div class="stat-value" id="focusTaskDuration">‚Äî</div>
            </div>
          </div>
          <div class="col-auto">
            <div class="stat-item">
              <div class="stat-label">Due In</div>
              <div class="stat-value" id="focusTaskDeadline">‚Äî</div>
            </div>
          </div>
          <div class="col-auto">
            <div class="stat-item">
              <div class="stat-label">Priority</div>
              <div class="stat-value" id="focusTaskPriority">‚Äî</div>
            </div>
          </div>
        </div>
        <button class="btn btn-focus" id="startFocusBtn">
          <i class="bi bi-play-circle me-2"></i>Start Focus Session
        </button>
      </div>
    </div>

    <!-- Tasks Section -->
    <div class="tasks-section">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h2 class="section-title mb-0">Priority Tasks</h2>
        <div class="btn-group view-toggle" role="group">
          <input type="radio" class="btn-check" name="viewFilter" id="filterAll" checked />
          <label class="btn btn-outline-secondary" for="filterAll">All</label>
          <input type="radio" class="btn-check" name="viewFilter" id="filterToday" />
          <label class="btn btn-outline-secondary" for="filterToday">Today</label>
          <input type="radio" class="btn-check" name="viewFilter" id="filterWeek" />
          <label class="btn btn-outline-secondary" for="filterWeek">Week</label>
        </div>
      </div>

      <!-- Task cards injected here by app.js -->
      <div id="taskList" class="task-list"></div>

      <!-- Empty state -->
      <div class="empty-state text-center py-5" id="emptyState" style="display:none;">
        <i class="bi bi-check-circle empty-icon d-block mb-3"></i>
        <p class="empty-text">You're all caught up!</p>
        <p class="empty-subtext text-muted">Click <strong>NEW TASK</strong> below to add one</p>
      </div>
    </div>

  </main>

  <!-- ‚îÄ‚îÄ Floating NEW TASK Button ‚îÄ‚îÄ -->
  <button class="btn btn-new-task" id="newTaskBtn">
    <i class="bi bi-plus-lg me-2"></i>NEW TASK
  </button>


  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       MODAL 1 ‚Äî Create New Task
       ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="modal fade" id="newTaskModal" tabindex="-1" aria-labelledby="newTaskModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">

        <div class="modal-header border-0 pb-0">
          <div>
            <h5 class="modal-title" id="newTaskModalLabel">
              <i class="bi bi-plus-circle me-2" style="color:var(--accent-primary)"></i>Create New Task
            </h5>
            <p class="text-muted small mb-0">Fill in the details below to add a task</p>
          </div>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>

        <div class="modal-body pt-3">
          <form id="newTaskForm" novalidate>

            <div class="mb-3">
              <label for="taskName" class="form-label">Task Name <span class="text-danger">*</span></label>
              <input type="text" class="form-control" id="taskName"
                     placeholder="e.g., Finish Math Homework" required />
            </div>

            <div class="mb-3">
              <label for="taskDescription" class="form-label">Description <span class="text-muted fw-normal">(optional)</span></label>
              <textarea class="form-control" id="taskDescription" rows="2"
                        placeholder="Add any notes or details..."></textarea>
            </div>

            <div class="row g-3 mb-3">
              <div class="col-6">
                <label for="taskDuration" class="form-label">Duration <span class="text-danger">*</span></label>
                <select class="form-select" id="taskDuration" required>
                  <option value="">Select...</option>
                  <option value="15">15 min</option>
                  <option value="30">30 min</option>
                  <option value="45">45 min</option>
                  <option value="60">1 hour</option>
                  <option value="90">1.5 hours</option>
                  <option value="120">2 hours</option>
                  <option value="180">3 hours</option>
                </select>
              </div>
              <div class="col-6">
                <label for="taskDeadline" class="form-label">Deadline <span class="text-danger">*</span></label>
                <input type="date" class="form-control" id="taskDeadline" required />
              </div>
            </div>

            <div class="row g-3">
              <div class="col-6">
                <label for="taskPriority" class="form-label">Priority <span class="text-danger">*</span></label>
                <select class="form-select" id="taskPriority" required>
                  <option value="">Select...</option>
                  <option value="high">üî¥ High</option>
                  <option value="medium">üü° Medium</option>
                  <option value="low">üü¢ Low</option>
                </select>
              </div>
              <div class="col-6">
                <label for="taskCategory" class="form-label">Category</label>
                <select class="form-select" id="taskCategory">
                  <option value="">None</option>
                  <option value="work">üíº Work</option>
                  <option value="study">üìö Study</option>
                  <option value="personal">üè† Personal</option>
                  <option value="health">üí™ Health</option>
                </select>
              </div>
            </div>

          </form>
        </div>

        <div class="modal-footer border-0">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="submit" form="newTaskForm" class="btn btn-primary">
            <i class="bi bi-plus-lg me-1"></i>Create Task
          </button>
        </div>

      </div>
    </div>
  </div>


  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       MODAL 2 ‚Äî Edit Task
       ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="modal fade" id="editTaskModal" tabindex="-1" aria-labelledby="editTaskModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">

        <div class="modal-header border-0 pb-0">
          <div>
            <h5 class="modal-title" id="editTaskModalLabel">
              <i class="bi bi-pencil-square me-2" style="color:var(--accent-primary)"></i>Edit Task
            </h5>
            <p class="text-muted small mb-0">Update the details for this task</p>
          </div>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>

        <div class="modal-body pt-3">
          <form id="editTaskForm" novalidate>
            <input type="hidden" id="editTaskId" />

            <div class="mb-3">
              <label for="editTaskName" class="form-label">Task Name <span class="text-danger">*</span></label>
              <input type="text" class="form-control" id="editTaskName" required />
            </div>

            <div class="mb-3">
              <label for="editTaskDescription" class="form-label">Description <span class="text-muted fw-normal">(optional)</span></label>
              <textarea class="form-control" id="editTaskDescription" rows="2"></textarea>
            </div>

            <div class="row g-3 mb-3">
              <div class="col-6">
                <label for="editTaskDuration" class="form-label">Duration <span class="text-danger">*</span></label>
                <select class="form-select" id="editTaskDuration" required>
                  <option value="15">15 min</option>
                  <option value="30">30 min</option>
                  <option value="45">45 min</option>
                  <option value="60">1 hour</option>
                  <option value="90">1.5 hours</option>
                  <option value="120">2 hours</option>
                  <option value="180">3 hours</option>
                </select>
              </div>
              <div class="col-6">
                <label for="editTaskDeadline" class="form-label">Deadline <span class="text-danger">*</span></label>
                <input type="date" class="form-control" id="editTaskDeadline" required />
              </div>
            </div>

            <div class="row g-3 mb-3">
              <div class="col-6">
                <label for="editTaskPriority" class="form-label">Priority <span class="text-danger">*</span></label>
                <select class="form-select" id="editTaskPriority" required>
                  <option value="high">üî¥ High</option>
                  <option value="medium">üü° Medium</option>
                  <option value="low">üü¢ Low</option>
                </select>
              </div>
              <div class="col-6">
                <label for="editTaskCategory" class="form-label">Category</label>
                <select class="form-select" id="editTaskCategory">
                  <option value="">None</option>
                  <option value="work">üíº Work</option>
                  <option value="study">üìö Study</option>
                  <option value="personal">üè† Personal</option>
                  <option value="health">üí™ Health</option>
                </select>
              </div>
            </div>

            <!-- Status toggle inside edit modal -->
            <div class="p-3 rounded-3" style="background:var(--bg-primary); border:1px solid var(--border-color);">
              <div class="form-check form-switch mb-0">
                <input class="form-check-input" type="checkbox" id="editTaskCompleted" />
                <label class="form-check-label fw-600" for="editTaskCompleted">
                  Mark as completed
                </label>
              </div>
            </div>

          </form>
        </div>

        <div class="modal-footer border-0">
          <!-- Delete shortcut in footer -->
          <button type="button" class="btn btn-outline-danger me-auto"
                  onclick="handleDeleteFromEdit()">
            <i class="bi bi-trash me-1"></i>Delete
          </button>
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="submit" form="editTaskForm" class="btn btn-primary">
            <i class="bi bi-check-lg me-1"></i>Save Changes
          </button>
        </div>

      </div>
    </div>
  </div>


  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       MODAL 3 ‚Äî Task Detail / View
       ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div class="modal fade" id="viewTaskModal" tabindex="-1" aria-labelledby="viewTaskModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">

        <div class="modal-header border-0 pb-0">
          <h5 class="modal-title" id="viewTaskModalLabel">Task Details</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>

        <div class="modal-body">

          <!-- Status banner -->
          <div id="viewStatusBanner" class="rounded-3 px-3 py-2 mb-4 d-flex align-items-center gap-2"
               style="background:rgba(34,197,94,0.08); color:#16a34a; display:none!important;">
            <i class="bi bi-check-circle-fill"></i>
            <span class="fw-600 small">Completed</span>
          </div>

          <h4 class="fw-700 mb-1" id="viewTaskName">‚Äî</h4>
          <p class="text-muted small mb-4" id="viewTaskDescription">‚Äî</p>

          <div class="row g-3 mb-4">
            <div class="col-6">
              <div class="detail-box">
                <div class="detail-label"><i class="bi bi-clock me-1"></i>Duration</div>
                <div class="detail-value" id="viewTaskDuration">‚Äî</div>
              </div>
            </div>
            <div class="col-6">
              <div class="detail-box">
                <div class="detail-label"><i class="bi bi-calendar me-1"></i>Deadline</div>
                <div class="detail-value" id="viewTaskDeadline">‚Äî</div>
              </div>
            </div>
            <div class="col-6">
              <div class="detail-box">
                <div class="detail-label"><i class="bi bi-flag me-1"></i>Priority</div>
                <div class="detail-value" id="viewTaskPriority">‚Äî</div>
              </div>
            </div>
            <div class="col-6">
              <div class="detail-box">
                <div class="detail-label"><i class="bi bi-tag me-1"></i>Category</div>
                <div class="detail-value" id="viewTaskCategory">‚Äî</div>
              </div>
            </div>
          </div>

          <!-- Quick action buttons -->
          <div class="d-flex gap-2 flex-wrap">
            <button class="btn btn-primary flex-fill" id="viewCompleteBtn"
                    onclick="handleToggleTaskFromView()">
              <i class="bi bi-check-circle me-1"></i><span id="viewCompleteLabel">Mark Complete</span>
            </button>
            <button class="btn btn-outline-primary" onclick="handleEditFromView()">
              <i class="bi bi-pencil me-1"></i>Edit
            </button>
            <button class="btn btn-outline-danger" onclick="handleDeleteFromView()">
              <i class="bi bi-trash"></i>
            </button>
          </div>

        </div>
      </div>
    </div>
  </div>


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="app.js"></script>
</body>
</html>